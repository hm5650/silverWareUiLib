local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = "HitboxUI"

local main = Instance.new("Frame", gui)
main.Size = UDim2.new(0, 160, 0, 110)
main.Position = UDim2.new(0.5, -80, 0.5, -55)
main.BackgroundColor3 = Color3.fromRGB(20, 50, 50)
main.BackgroundTransparency = 0.2
main.Active = true
main.Draggable = true
main.BorderSizePixel = 0

local corner = Instance.new("UICorner", main)
corner.CornerRadius = UDim.new(0, 10)

local minimize = Instance.new("TextButton", main)
minimize.Size = UDim2.new(0, 20, 0, 20)
minimize.Position = UDim2.new(1, -22, 0, 2)
minimize.Text = "▼"
minimize.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
minimize.TextColor3 = Color3.fromRGB(255, 255, 255)
Instance.new("UICorner", minimize).CornerRadius = UDim.new(0, 8)

local scroll = Instance.new("ScrollingFrame", main)
scroll.Size = UDim2.new(1, -10, 1, -30)
scroll.Position = UDim2.new(0, 5, 0, 25)
scroll.BackgroundTransparency = 1
scroll.CanvasSize = UDim2.new(0, 0, 0, 0)
scroll.ScrollBarThickness = 5

local layout = Instance.new("UIListLayout", scroll)
layout.Padding = UDim.new(0, 6)
layout.SortOrder = Enum.SortOrder.LayoutOrder
layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
	scroll.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 10)
end)

local textbox = Instance.new("TextBox", scroll)
textbox.Size = UDim2.new(1, 0, 0, 30)
textbox.Text = "10"
textbox.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
textbox.TextColor3 = Color3.fromRGB(255, 255, 255)
Instance.new("UICorner", textbox).CornerRadius = UDim.new(0, 10)

local toggleButton = Instance.new("TextButton", scroll)
toggleButton.Size = UDim2.new(1, 0, 0, 30)
toggleButton.Text = "Enable Hitbox"
toggleButton.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
Instance.new("UICorner", toggleButton).CornerRadius = UDim.new(0, 10)

-- Logic
_G.HeadSize = tonumber(textbox.Text) or 2
_G.Disabled = true
local targetPlayers = {}

local function updatePlayers()
	targetPlayers = {}
	for _, p in ipairs(Players:GetPlayers()) do
		if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
			table.insert(targetPlayers, p)
		end
	end
end

textbox.FocusLost:Connect(function()
	local val = tonumber(textbox.Text)
	if val then
		_G.HeadSize = val
	else
		textbox.Text = tostring(_G.HeadSize)
	end
end)

toggleButton.MouseButton1Click:Connect(function()
	_G.Disabled = not _G.Disabled
	toggleButton.Text = _G.Disabled and "Enable Hitbox" or "Disable Hitbox"
	if not _G.Disabled then
		for _, p in ipairs(targetPlayers) do
			local root = p.Character and p.Character:FindFirstChild("HumanoidRootPart")
			if root then
				root.Size = Vector3.new(2, 2, 2)
				root.Transparency = 0
				root.BrickColor = BrickColor.new("Medium stone grey")
				root.Material = Enum.Material.Plastic
				root.CanCollide = true
			end
		end
	end
end)

RunService.RenderStepped:Connect(function()
	if not _G.Disabled then
		for _, p in ipairs(targetPlayers) do
			local root = p.Character and p.Character:FindFirstChild("HumanoidRootPart")
			if root then
				root.Size = Vector3.new(_G.HeadSize, _G.HeadSize, _G.HeadSize)
				root.Transparency = 0.1
				root.Material = Enum.Material.Neon
				root.BrickColor = BrickColor.new("Really blue")
				root.CanCollide = false
			end
		end
	end
end)

-- Minimize toggle
local minimized = false
minimize.MouseButton1Click:Connect(function()
	minimized = not minimized
	scroll.Visible = not minimized
	minimize.Text = minimized and "▲" or "▼"
end)

-- Auto update player list
while true do
	updatePlayers()
	wait(1)
end
